<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–¢–µ—Å—Ç MoodBoard –Ω–∞ –≤–ª–æ–∂–µ–Ω–Ω—ã—Ö —Ä–æ—É—Ç–∞—Ö</title>
    <style>
        body { margin: 0; padding: 0; font-family: Arial, sans-serif; }
        .test-info {
            position: fixed;
            top: 10px;
            right: 10px;
            background: white;
            padding: 10px;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            z-index: 10000;
            max-width: 300px;
            font-size: 12px;
        }
        .path-info {
            margin: 5px 0;
            font-family: monospace;
            background: #f5f5f5;
            padding: 2px 4px;
            border-radius: 3px;
        }
        #moodboard-container { 
            width: 100vw; 
            height: 100vh;
        }
    </style>
</head>
<body>
    <div class="test-info">
        <strong>–¢–µ—Å—Ç –≤–ª–æ–∂–µ–Ω–Ω—ã—Ö —Ä–æ—É—Ç–æ–≤</strong><br>
        –¢–µ–∫—É—â–∏–π URL: <div class="path-info" id="current-url"></div>
        –ë–∞–∑–æ–≤—ã–π –ø—É—Ç—å —ç–º–æ–¥–∂–∏: <div class="path-info" id="emoji-base-path"></div>
        –°—Ç–∞—Ç—É—Å: <span id="status">–ó–∞–≥—Ä—É–∑–∫–∞...</span>
    </div>

    <div id="moodboard-container"></div>

    <script type="module">
        // –û—Ç–æ–±—Ä–∞–∂–∞–µ–º —Ç–µ–∫—É—â–∏–π URL
        document.getElementById('current-url').textContent = location.href;
        
        try {
            import { 
                quickInitMoodBoard, 
                injectCriticalStyles 
            } from './src/index.js';
            
            injectCriticalStyles();
            
            const moodboard = quickInitMoodBoard('#moodboard-container', {
                theme: 'light',
                autoSave: false
            });
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –±–∞–∑–æ–≤—ã–π –ø—É—Ç—å —ç–º–æ–¥–∂–∏
            setTimeout(() => {
                try {
                    const toolbar = moodboard.toolbar;
                    if (toolbar && toolbar.getEmojiBasePath) {
                        const basePath = toolbar.getEmojiBasePath();
                        document.getElementById('emoji-base-path').textContent = basePath;
                        
                        // –¢–µ—Å—Ç–∏—Ä—É–µ–º –∑–∞–≥—Ä—É–∑–∫—É –æ–¥–Ω–æ–≥–æ —ç–º–æ–¥–∂–∏
                        const testEmojiUrl = basePath + '–°–º–∞–π–ª–∏–∫–∏/1f600.png';
                        const img = new Image();
                        img.onload = () => {
                            document.getElementById('status').textContent = '‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç! –≠–º–æ–¥–∂–∏ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è';
                            document.getElementById('status').style.color = 'green';
                        };
                        img.onerror = () => {
                            document.getElementById('status').textContent = '‚ùå –û—à–∏–±–∫–∞! –≠–º–æ–¥–∂–∏ –Ω–µ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è';
                            document.getElementById('status').style.color = 'red';
                            console.error('‚ùå –¢–µ—Å—Ç–æ–≤—ã–π —ç–º–æ–¥–∂–∏ –Ω–µ –∑–∞–≥—Ä—É–∑–∏–ª—Å—è:', testEmojiUrl);
                        };
                        img.src = testEmojiUrl;
                    }
                } catch (e) {
                    document.getElementById('status').textContent = '‚ö†Ô∏è –û—à–∏–±–∫–∞ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è';
                    console.error('–û—à–∏–±–∫–∞ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:', e);
                }
            }, 2000);
            
        } catch (error) {
            console.error('‚ùå –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è –æ—à–∏–±–∫–∞:', error);
            document.getElementById('status').textContent = '‚ùå –û—à–∏–±–∫–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏';
            document.getElementById('status').style.color = 'red';
        }
    </script>

    <!-- –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é -->
    <script>
        console.log('üìù –ò–ù–°–¢–†–£–ö–¶–ò–Ø –ü–û –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–Æ:');
        console.log('1. –û—Ç–∫—Ä–æ–π—Ç–µ —ç—Ç–æ—Ç —Ñ–∞–π–ª –ø—Ä—è–º–æ: http://localhost/test-nested-routes.html');
        console.log('2. –ó–∞—Ç–µ–º –Ω–∞ –≤–ª–æ–∂–µ–Ω–Ω–æ–º —Ä–æ—É—Ç–µ: http://localhost/boards/123/test-nested-routes.html');
        console.log('3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ —ç–º–æ–¥–∂–∏ —Ä–∞–±–æ—Ç–∞—é—Ç –≤ –æ–±–æ–∏—Ö —Å–ª—É—á–∞—è—Ö');
        console.log('4. –í –ø—Ä–∞–≤–æ–º –≤–µ—Ä—Ö–Ω–µ–º —É–≥–ª—É –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —Å—Ç–∞—Ç—É—Å "‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç!"');
    </script>
</body>
</html>
